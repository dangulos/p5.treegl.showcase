<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="ViewFrustum # Treegl allows you to visualize the volume that a camera is rendering through a frustum. This frustum shows the position of the screen and the camera, the render distance and the shape it has.
Params # Name PropType description fbo p5.RendererGL or p5.Graphics The renderer to be shown by the frustum. bits number Bitmask to choose which planes to draw. viewer function Callback that allows to draw a visual representation of the fbo&rsquo;s position."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="ViewFrustum # Treegl allows you to visualize the volume that a camera is rendering through a frustum. This frustum shows the position of the screen and the camera, the render distance and the shape it has.
Params # Name PropType description fbo p5.RendererGL or p5.Graphics The renderer to be shown by the frustum. bits number Bitmask to choose which planes to draw. viewer function Callback that allows to draw a visual representation of the fbo&rsquo;s position."><meta property="og:type" content="article"><meta property="og:url" content="https://dangulos.github.io/p5.treegl.showcase/docs/Componentes/viewFrustum/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2022-07-04T19:35:08-05:00"><title>View Frustum | P5.treegl Drawing Stuff</title><link rel=manifest href=/p5.treegl.showcase/manifest.json><link rel=icon href=/p5.treegl.showcase/favicon.png type=image/x-icon><link rel=stylesheet href=/p5.treegl.showcase/book.min.ab46de3e725a6415339a37bba23a0067534a37289b063c9f8d011515a63097a8.css integrity="sha256-q0bePnJaZBUzmje7ojoAZ1NKNyibBjyfjQEVFaYwl6g=" crossorigin=anonymous><script defer src=/p5.treegl.showcase/flexsearch.min.js></script>
<script defer src=/p5.treegl.showcase/en.search.min.22f27e248e927bd2a978c210cf90a34a11be8dce588cc1c3894974945f992130.js integrity="sha256-IvJ+JI6Se9KpeMIQz5CjShG+jc5YjMHDiUl0lF+ZITA=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/p5.treegl.showcase/><span>P5.treegl Drawing Stuff</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><input type=checkbox id=section-4f64e1ecb245dc4a145fefe6f0f6c7ac class=toggle checked>
<label for=section-4f64e1ecb245dc4a145fefe6f0f6c7ac class="flex justify-between"><a role=button>Componentes</a></label><ul><li><a href=/p5.treegl.showcase/docs/Componentes/Arrow/>Arrow</a></li><li><a href=/p5.treegl.showcase/docs/Componentes/Axes/>Axes</a></li><li><a href=/p5.treegl.showcase/docs/Componentes/Bagel/>Bagel</a></li><li><a href=/p5.treegl.showcase/docs/Componentes/Bullseye/>Bullseye</a></li><li><a href=/p5.treegl.showcase/docs/Componentes/Grid/>Grid</a></li><li><a href=/p5.treegl.showcase/docs/Componentes/Mobius_Strip/>Mobius Strip</a></li><li><a href=/p5.treegl.showcase/docs/Componentes/Pipe/>Pipe</a></li><li><a href=/p5.treegl.showcase/docs/Componentes/viewFrustum/ class=active>View Frustum</a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/p5.treegl.showcase/svg/menu.svg class=book-icon alt=Menu></label>
<strong>View Frustum</strong>
<label for=toc-control><img src=/p5.treegl.showcase/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#viewfrustum>ViewFrustum</a><ul><li><a href=#params>Params</a></li><li><a href=#bitmask>Bitmask</a></li><li><a href=#orthographic-projection>Orthographic Projection</a><ul><li><a href=#code>code</a></li></ul></li><li><a href=#perspective-projection>Perspective Projection</a><ul><li><a href=#code-1>code</a></li></ul></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=viewfrustum>ViewFrustum
<a class=anchor href=#viewfrustum>#</a></h1><p>Treegl allows you to visualize the volume that a camera is rendering through a frustum. This frustum shows the position of the screen and the camera, the render distance and the shape it has.</p><h2 id=params>Params
<a class=anchor href=#params>#</a></h2><table><thead><tr><th>Name</th><th>PropType</th><th>description</th></tr></thead><tbody><tr><td><strong>fbo</strong></td><td><em>p5.RendererGL or p5.Graphics</em></td><td>The renderer to be shown by the frustum.</td></tr><tr><td><strong>bits</strong></td><td><em>number</em></td><td>Bitmask to choose which planes to draw.</td></tr><tr><td><strong>viewer</strong></td><td><em>function</em></td><td>Callback that allows to draw a visual representation of the fbo&rsquo;s position.</td></tr></tbody></table><h2 id=bitmask>Bitmask
<a class=anchor href=#bitmask>#</a></h2><p>The <strong>bits</strong> parameter which planes to show. Even though this param is a number, it works as a <a href=https://en.wikipedia.org/wiki/Mask_%28computing%29>Bitmask</a> (Similar <a href=https://en.wikipedia.org/wiki/Chmod#Numerical_permissions>chmod</a>&rsquo;s numerical permissions in GNU/Linux). This bitmask allows different options to be chosen in a sigle parameter. <code>p5.treegl</code> adds the <code>Tree</code> object which allows easy access to all the necesary bits to mark different options. Each option is ordered as follows:</p><table><thead><tr><th>Description</th><th>Valor en Tree</th><th>Binario</th><th>Decimal</th></tr></thead><tbody><tr><td>Draws the far plane</td><td>Tree.NEAR</td><td>0000001</td><td>1</td></tr><tr><td>Draws the near plane</td><td>Tree.FAR</td><td>0000010</td><td>2</td></tr><tr><td>Draws the left boundary</td><td>Tree.LEFT</td><td>0000100</td><td>4</td></tr><tr><td>Draws the right boundary</td><td>Tree.RIGHT</td><td>0001000</td><td>8</td></tr><tr><td>Draws the bottom boundary</td><td>Tree.BOTTOM</td><td>0010000</td><td>16</td></tr><tr><td>Draws the top boundary</td><td>Tree.TOP</td><td>0100000</td><td>32</td></tr><tr><td>Draws the frustum&rsquo;s body</td><td>Tree.BODY</td><td>1000000</td><td>64</td></tr></tbody></table><h2 id=orthographic-projection>Orthographic Projection
<a class=anchor href=#orthographic-projection>#</a></h2><p>In orthographic projection, the camera that is rendering the scene does not identify depth. This means that no matter how far away an object is from the camera, it will retain its size. It&rsquo;s often used for schematics, architectural drawings, 3D software when lining up vertices and mesuring distances as they also remain constant.</p><p><code>Click and drag to move the camera arround!</code></p><iframe id=orthogonalFrustum style=width:425px;height:725px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.1/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.1/addons/p5.sound.min.js></script>
             <script src=https://cdn.jsdelivr.net/gh/freshfork/p5.EasyCam@1.2.1/p5.easycam.min.js></script> 
             <script src=/p5.treegl.showcase/libs/p5.treegl/p5.treegl.js></script> 
             <script src=https://cdn.rawgit.com/bitcraftlab/p5.gui/master/libraries/p5.gui.js></script> 
             <script src=https://cdn.rawgit.com/bit101/quicksettings/master/quicksettings.js></script> 
            
            <script src=/p5.treegl.showcase/sketches/components/frustum/orthogonalFrustum.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h3 id=code>code
<a class=anchor href=#code>#</a></h3><details><summary>sketch.js</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#e6db74>&#39;use strict&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>fbo1</span>, <span style=color:#a6e22e>fbo2</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cam1</span>, <span style=color:#a6e22e>cam2</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>height</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>600</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>boxes</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>persp</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>left</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>300</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>right</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>300</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>frustum_width</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>200</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>bottom</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>300</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>topa</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>300</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>frustum_height</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>200</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>far</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>500</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>gui</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>createCanvas</span>(<span style=color:#ae81ff>400</span>, <span style=color:#ae81ff>700</span>);
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo1</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createGraphics</span>(<span style=color:#ae81ff>400</span>, <span style=color:#ae81ff>350</span>, <span style=color:#a6e22e>WEBGL</span>);
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo2</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createGraphics</span>(<span style=color:#ae81ff>400</span>, <span style=color:#ae81ff>350</span>, <span style=color:#a6e22e>WEBGL</span>);
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo1</span>.<span style=color:#a6e22e>ortho</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>fbo1</span>.<span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>fbo1</span>.<span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>fbo1</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>fbo1</span>.<span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>500</span>);
</span></span><span style=display:flex><span>	<span style=color:#75715e>// FBOs cams
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>cam1</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Dw</span>.<span style=color:#a6e22e>EasyCam</span>(<span style=color:#a6e22e>fbo1</span>.<span style=color:#a6e22e>_renderer</span>, { <span style=color:#a6e22e>distance</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>200</span> });
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>state1</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cam1</span>.<span style=color:#a6e22e>getState</span>();
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>cam1</span>.<span style=color:#a6e22e>attachMouseListeners</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_renderer</span>);
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>cam1</span>.<span style=color:#a6e22e>state_reset</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>state1</span>; <span style=color:#75715e>// state to use on reset (double-click/tap)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>cam1</span>.<span style=color:#a6e22e>setViewport</span>([<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>height</span>]);
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>cam2</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Dw</span>.<span style=color:#a6e22e>EasyCam</span>(<span style=color:#a6e22e>fbo2</span>.<span style=color:#a6e22e>_renderer</span>, { <span style=color:#a6e22e>rotation</span><span style=color:#f92672>:</span> [<span style=color:#ae81ff>0.94</span>, <span style=color:#ae81ff>0.33</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>] });
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>cam2</span>.<span style=color:#a6e22e>attachMouseListeners</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_renderer</span>);
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>state2</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cam2</span>.<span style=color:#a6e22e>getState</span>();
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>cam2</span>.<span style=color:#a6e22e>state_reset</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>state2</span>; <span style=color:#75715e>// state to use on reset (double-click/tap)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>cam2</span>.<span style=color:#a6e22e>setViewport</span>([<span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>height</span>]);
</span></span><span style=display:flex><span>	document.<span style=color:#a6e22e>oncontextmenu</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> () {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>	};
</span></span><span style=display:flex><span>	<span style=color:#75715e>// scene
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>colorMode</span>(<span style=color:#a6e22e>RGB</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>boxes</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>5</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>){
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>5</span>; <span style=color:#a6e22e>j</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>boxes</span>.<span style=color:#a6e22e>push</span>({
</span></span><span style=display:flex><span>				<span style=color:#a6e22e>position</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>createVector</span>(<span style=color:#a6e22e>i</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>40</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>70</span>, <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>j</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>40</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>70</span>),
</span></span><span style=display:flex><span>				<span style=color:#a6e22e>size</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>20</span>,
</span></span><span style=display:flex><span>				<span style=color:#a6e22e>color</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>color</span>(<span style=color:#a6e22e>random</span>(), <span style=color:#a6e22e>random</span>(), <span style=color:#a6e22e>random</span>()),
</span></span><span style=display:flex><span>			});
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>print</span>(<span style=color:#a6e22e>fbo1</span>.<span style=color:#a6e22e>bounds</span>());
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>gui</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createGui</span>(<span style=color:#e6db74>&#39;Double click to close&#39;</span>).<span style=color:#a6e22e>setPosition</span>(<span style=color:#ae81ff>30</span>, <span style=color:#ae81ff>350</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>gui</span>.<span style=color:#a6e22e>addGlobals</span>(<span style=color:#e6db74>&#39;frustum_width&#39;</span>, <span style=color:#e6db74>&#39;frustum_height&#39;</span>, <span style=color:#e6db74>&#39;far&#39;</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fbo1</span>.<span style=color:#a6e22e>ortho</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>frustum_width</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>frustum_width</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>frustum_height</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>frustum_height</span><span style=color:#f92672>/</span><span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>far</span>);
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo1</span>.<span style=color:#a6e22e>background</span>(<span style=color:#ae81ff>175</span>, <span style=color:#ae81ff>125</span>, <span style=color:#ae81ff>115</span>);
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo1</span>.<span style=color:#a6e22e>reset</span>();
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo1</span>.<span style=color:#a6e22e>axes</span>({ <span style=color:#a6e22e>size</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>100</span>, <span style=color:#a6e22e>bits</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>X</span> <span style=color:#f92672>|</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>YNEG</span> });
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo1</span>.<span style=color:#a6e22e>grid</span>();
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>scene</span>(<span style=color:#a6e22e>fbo1</span>);
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>beginHUD</span>();
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>image</span>(<span style=color:#a6e22e>fbo1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>endHUD</span>();
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo2</span>.<span style=color:#a6e22e>background</span>(<span style=color:#ae81ff>130</span>);
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo2</span>.<span style=color:#a6e22e>reset</span>();
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo2</span>.<span style=color:#a6e22e>axes</span>();
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo2</span>.<span style=color:#a6e22e>grid</span>();
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>scene</span>(<span style=color:#a6e22e>fbo2</span>);
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo2</span>.<span style=color:#a6e22e>push</span>();
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo2</span>.<span style=color:#a6e22e>strokeWeight</span>(<span style=color:#ae81ff>3</span>);
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo2</span>.<span style=color:#a6e22e>stroke</span>(<span style=color:#e6db74>&#39;magenta&#39;</span>);
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo2</span>.<span style=color:#a6e22e>fill</span>(<span style=color:#a6e22e>color</span>(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0.3</span>));
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo2</span>.<span style=color:#a6e22e>viewFrustum</span>({ <span style=color:#a6e22e>fbo</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>fbo1</span>, <span style=color:#a6e22e>bits</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>NEAR</span> <span style=color:#f92672>|</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>FAR</span> });
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo2</span>.<span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>beginHUD</span>();
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>image</span>(<span style=color:#a6e22e>fbo2</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>350</span>);
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>endHUD</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>scene</span>(<span style=color:#a6e22e>graphics</span>) {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>boxes</span>.<span style=color:#a6e22e>forEach</span>(<span style=color:#a6e22e>box</span> =&gt; {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>graphics</span>.<span style=color:#a6e22e>push</span>();
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>graphics</span>.<span style=color:#a6e22e>fill</span>(<span style=color:#a6e22e>box</span>.<span style=color:#a6e22e>color</span>);
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>graphics</span>.<span style=color:#a6e22e>translate</span>(<span style=color:#a6e22e>box</span>.<span style=color:#a6e22e>position</span>);
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>graphics</span>.<span style=color:#a6e22e>box</span>(<span style=color:#a6e22e>box</span>.<span style=color:#a6e22e>size</span>);
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>graphics</span>.<span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>	});
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><h2 id=perspective-projection>Perspective Projection
<a class=anchor href=#perspective-projection>#</a></h2><p>This projection is the most similar to the human eye. In perspective projection, the camera gives a sense of depth. The further away an object is from the camera, the smaller it appears.</p><p><code>Click and drag to move the camera arround!</code></p><iframe id=perspectiveFrustum style=width:425px;height:725px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.1/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.1/addons/p5.sound.min.js></script>
             <script src=https://cdn.jsdelivr.net/gh/freshfork/p5.EasyCam@1.2.1/p5.easycam.min.js></script> 
             <script src=/p5.treegl.showcase/libs/p5.treegl/p5.treegl.js></script> 
             <script src=https://cdn.rawgit.com/bitcraftlab/p5.gui/master/libraries/p5.gui.js></script> 
             <script src=https://cdn.rawgit.com/bit101/quicksettings/master/quicksettings.js></script> 
            
            <script src=/p5.treegl.showcase/sketches/components/frustum/perspectiveFrustum.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h3 id=code-1>code
<a class=anchor href=#code-1>#</a></h3><details><summary>sketch.js</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#e6db74>&#39;use strict&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>fbo1</span>, <span style=color:#a6e22e>fbo2</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>cam1</span>, <span style=color:#a6e22e>cam2</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>height</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>600</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>boxes</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>persp</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>far</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>500</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>vertical_fov</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>100</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>gui</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>createCanvas</span>(<span style=color:#ae81ff>400</span>, <span style=color:#ae81ff>700</span>);
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo1</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createGraphics</span>(<span style=color:#ae81ff>400</span>, <span style=color:#ae81ff>350</span>, <span style=color:#a6e22e>WEBGL</span>);
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo2</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createGraphics</span>(<span style=color:#ae81ff>400</span>, <span style=color:#ae81ff>350</span>, <span style=color:#a6e22e>WEBGL</span>);
</span></span><span style=display:flex><span>	<span style=color:#75715e>// FBOs cams
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>cam1</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Dw</span>.<span style=color:#a6e22e>EasyCam</span>(<span style=color:#a6e22e>fbo1</span>.<span style=color:#a6e22e>_renderer</span>, { <span style=color:#a6e22e>distance</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>200</span> });
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>state1</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cam1</span>.<span style=color:#a6e22e>getState</span>();
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>cam1</span>.<span style=color:#a6e22e>attachMouseListeners</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_renderer</span>);
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>cam1</span>.<span style=color:#a6e22e>state_reset</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>state1</span>; <span style=color:#75715e>// state to use on reset (double-click/tap)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>cam1</span>.<span style=color:#a6e22e>setViewport</span>([<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>height</span>]);
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>cam2</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Dw</span>.<span style=color:#a6e22e>EasyCam</span>(<span style=color:#a6e22e>fbo2</span>.<span style=color:#a6e22e>_renderer</span>, { <span style=color:#a6e22e>rotation</span><span style=color:#f92672>:</span> [<span style=color:#ae81ff>0.94</span>, <span style=color:#ae81ff>0.33</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>] });
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>cam2</span>.<span style=color:#a6e22e>attachMouseListeners</span>(<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>_renderer</span>);
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>state2</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>cam2</span>.<span style=color:#a6e22e>getState</span>();
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>cam2</span>.<span style=color:#a6e22e>state_reset</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>state2</span>; <span style=color:#75715e>// state to use on reset (double-click/tap)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>cam2</span>.<span style=color:#a6e22e>setViewport</span>([<span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>height</span>]);
</span></span><span style=display:flex><span>	document.<span style=color:#a6e22e>oncontextmenu</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> () {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>	};
</span></span><span style=display:flex><span>	<span style=color:#75715e>// scene
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>colorMode</span>(<span style=color:#a6e22e>RGB</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>boxes</span> <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>5</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>){
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>5</span>; <span style=color:#a6e22e>j</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>boxes</span>.<span style=color:#a6e22e>push</span>({
</span></span><span style=display:flex><span>				<span style=color:#a6e22e>position</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>createVector</span>(<span style=color:#a6e22e>i</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>40</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>70</span>, <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>j</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>40</span> <span style=color:#f92672>-</span> <span style=color:#ae81ff>70</span>),
</span></span><span style=display:flex><span>				<span style=color:#a6e22e>size</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>20</span>,
</span></span><span style=display:flex><span>				<span style=color:#a6e22e>color</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>color</span>(<span style=color:#a6e22e>random</span>(), <span style=color:#a6e22e>random</span>(), <span style=color:#a6e22e>random</span>()),
</span></span><span style=display:flex><span>			});
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>print</span>(<span style=color:#a6e22e>fbo1</span>.<span style=color:#a6e22e>bounds</span>());
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>gui</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createGui</span>(<span style=color:#e6db74>&#39;Double click to close&#39;</span>).<span style=color:#a6e22e>setPosition</span>(<span style=color:#ae81ff>30</span>, <span style=color:#ae81ff>350</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>gui</span>.<span style=color:#a6e22e>addGlobals</span>(<span style=color:#e6db74>&#39;vertical_fov&#39;</span>, <span style=color:#e6db74>&#39;far&#39;</span>);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fbo1</span>.<span style=color:#a6e22e>perspective</span>(<span style=color:#a6e22e>vertical_fov</span><span style=color:#f92672>*</span>(<span style=color:#a6e22e>PI</span><span style=color:#f92672>/</span><span style=color:#ae81ff>3</span>)<span style=color:#f92672>/</span><span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>10</span>, <span style=color:#a6e22e>far</span>);
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo1</span>.<span style=color:#a6e22e>background</span>(<span style=color:#ae81ff>175</span>, <span style=color:#ae81ff>125</span>, <span style=color:#ae81ff>115</span>);
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo1</span>.<span style=color:#a6e22e>reset</span>();
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo1</span>.<span style=color:#a6e22e>axes</span>({ <span style=color:#a6e22e>size</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>100</span>, <span style=color:#a6e22e>bits</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>X</span> <span style=color:#f92672>|</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>YNEG</span> });
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo1</span>.<span style=color:#a6e22e>grid</span>();
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>scene</span>(<span style=color:#a6e22e>fbo1</span>);
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>beginHUD</span>();
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>image</span>(<span style=color:#a6e22e>fbo1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>endHUD</span>();
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo2</span>.<span style=color:#a6e22e>background</span>(<span style=color:#ae81ff>130</span>);
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo2</span>.<span style=color:#a6e22e>reset</span>();
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo2</span>.<span style=color:#a6e22e>axes</span>();
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo2</span>.<span style=color:#a6e22e>grid</span>();
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>scene</span>(<span style=color:#a6e22e>fbo2</span>);
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo2</span>.<span style=color:#a6e22e>push</span>();
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo2</span>.<span style=color:#a6e22e>strokeWeight</span>(<span style=color:#ae81ff>3</span>);
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo2</span>.<span style=color:#a6e22e>stroke</span>(<span style=color:#e6db74>&#39;magenta&#39;</span>);
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo2</span>.<span style=color:#a6e22e>fill</span>(<span style=color:#a6e22e>color</span>(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0.3</span>));
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo2</span>.<span style=color:#a6e22e>viewFrustum</span>({ <span style=color:#a6e22e>fbo</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>fbo1</span>, <span style=color:#a6e22e>bits</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>NEAR</span> <span style=color:#f92672>|</span> <span style=color:#a6e22e>Tree</span>.<span style=color:#a6e22e>FAR</span> });
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fbo2</span>.<span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>beginHUD</span>();
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>image</span>(<span style=color:#a6e22e>fbo2</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>350</span>);
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>endHUD</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>scene</span>(<span style=color:#a6e22e>graphics</span>) {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>boxes</span>.<span style=color:#a6e22e>forEach</span>(<span style=color:#a6e22e>box</span> =&gt; {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>graphics</span>.<span style=color:#a6e22e>push</span>();
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>graphics</span>.<span style=color:#a6e22e>fill</span>(<span style=color:#a6e22e>box</span>.<span style=color:#a6e22e>color</span>);
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>graphics</span>.<span style=color:#a6e22e>translate</span>(<span style=color:#a6e22e>box</span>.<span style=color:#a6e22e>position</span>);
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>graphics</span>.<span style=color:#a6e22e>box</span>(<span style=color:#a6e22e>box</span>.<span style=color:#a6e22e>size</span>);
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>graphics</span>.<span style=color:#a6e22e>pop</span>();
</span></span><span style=display:flex><span>	});
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/visualcomputing/showcase/commit/50ee594718c938e3af528aef8f526622d9a3d6f3 title='Last modified by dangulos | July 5, 2022' target=_blank rel=noopener><img src=/p5.treegl.showcase/svg/calendar.svg class=book-icon alt=Calendar>
<span>July 5, 2022</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#viewfrustum>ViewFrustum</a><ul><li><a href=#params>Params</a></li><li><a href=#bitmask>Bitmask</a></li><li><a href=#orthographic-projection>Orthographic Projection</a><ul><li><a href=#code>code</a></li></ul></li><li><a href=#perspective-projection>Perspective Projection</a><ul><li><a href=#code-1>code</a></li></ul></li></ul></li></ul></nav></div></aside></main></body></html>